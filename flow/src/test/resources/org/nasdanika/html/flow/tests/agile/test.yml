flow-package:
  uri: nasdanika://flow/test
  name: Test Flow
  description: Test flow for troubleshooting, copied from Agile Core.
  participants:
    product-owner:
      name: Product Owner
      documentation: 
        content-markdown:
          source:
            content-text: Creates and ``grooms`` stories.
    scrum-master:
      name: Scrum Master
      description: Drives sprint execution.
    architect:
      name: Architect
      description: Keeps the product aligned to the architectural guidelines.
    developer:
      name: Developer
      description: Implements stories and tests in their local environment
    lead-developer:
      name: Lead Developer
      description: Developer leading development efforts and coaching the development team.
      bases: developer
    tester:
      name: Tester
      description: Tests in runtime environment
  resources:
    issue-tracker:
      name: Issue Tracker
      modifiers: abstract
      description: Repository of stories      
    source-repository:
      name: Source Repository
      modifiers: abstract
      description: Repository of source code
    ide:
      name: Development Environment
      modifiers: abstract
      services:
        install:
          flow-activity:
            name: Installation
            description: ...
    build-tool:
      name: Build tool
      modifiers: abstract
    runtime:
      name: Runtime
      modifiers: abstract
      description: Execution environment for the binary artifacts.
  artifacts:
    story:
      name: User story
      description: Describes increment in product fucntionality.
      repositories: issue-tracker
    source:
      name: Source code
      description: A collection of artifacts stored in the source repository and used to build a binary.
      repositories: source-repository
      responsible: developer
      accountable: lead-developer
      consulted: architect
      informed: [product-owner, tester]                
    binary:
      name: Binary artifact(s)
      description: Artifacts built from source code for execution in runtime environments.
      modifiers: abstract
  activities:
    test:
      flow-flow:
        name: Test
        representations:
          flow:
            hide-empty-description: true
            vertical: false
          generated: 
            type: drawio:./test.drawio
            name: Drawio
            description: Generated diagram
        elements:
          start:
            flow-start: 
              outputs:
                one:
                  target: one
                two:
                  target: two
                choice:
                  target: choice
                service: 
                  target: service
          choice:
            flow-choice:
              outputs:
                one-a:
                  target: one-a
                three:
                  target: three
                fork:
                  target: fork
          service:
            flow-service:
              name: Install stuff
              target: nasdanika://flow/test/resources/ide/services/install 
              documentation:
                content-interpolator:
                  source:
                    content-markdown:
                      style: true
                      source:
                        content-resource: install.md       
          one:
            flow-activity:
              name: One 
              outputs:
                one:
                  target: one-a
              calls:
                installation:
                  target: nasdanika://flow/test/resources/ide/services/install
                  description: Install things.
              representations:
                flow:
                  hide-empty-description: true
                  vertical: false
                  context: 1                  
          one-a:
            flow-activity:
              name: 1.a 
              outputs:
                fork:
                  target: fork
              representations:
                flow:
                  hide-empty-description: true
                  vertical: false
                  context: 1   
          fork:
            flow-fork:
              description: Fork on the road
              outputs:
                one-b:
                  target: one-b                       
                two:
                  target: two                       
          one-b:
            flow-activity:
              name: 1.b 
              outputs:
                one:
                  target: end
              representations:
                flow:
                  hide-empty-description: true
                  vertical: false
                  context: 1                  
          two:
            flow-flow:
              name: Two 
              partition: true
              outputs:
                one:
                  target: end
              elements:
                start:
                  flow-start: 
                    outputs:
                      one:
                        target: one
                      two:
                        target: two
                      three:
                        target: three
                one:
                  flow-activity:
                    name: 2.1 
                    outputs:
                      one:
                        target: end
                two:
                  flow-flow:
                    name: 2.2 
                    outputs:
                      one:
                        target: end
                three:
                  flow-activity:
                    name: 2.3 
                    outputs:
                      one:
                        target: end
                end:
                  flow-end: {}              
              representations:
                flow:
                  hide-empty-description: true
                  vertical: false
                  context: 1                  
          three:
            flow-activity:
              name: Three 
              outputs:
                one:
                  target: end
              representations:
                flow:
                  hide-empty-description: true
                  vertical: false
                  context: 1                  
          end:
            flow-end: {} 
            